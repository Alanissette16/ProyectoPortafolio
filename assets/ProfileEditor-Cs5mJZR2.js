import{b as R,r as i,j as e,m as z,h as P,p as I,k as L,s as G}from"./index-BH4wJvy1.js";import{m as y}from"./proxy-BEHoNeIf.js";import{S as U}from"./sparkles-ByfXZGR0.js";import{c as j}from"./createLucideIcon-D0cFDdCY.js";import{M as _,I as H,L as $}from"./map-pin-BR8yKhav.js";import{Q as J}from"./quote-BXwSlgDa.js";import{B as V}from"./briefcase-DP4G9biK.js";import{C as Q}from"./clock-U-DdIR7r.js";import{U as T}from"./users-Cx7uSbIb.js";import{X as K}from"./x-Buc1BbKM.js";import{G as W}from"./github-Ca_6d6Ei.js";import{P as X}from"./phone-DKkkBGe1.js";const O=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Y=j("camera",O);const Z=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ee=j("plus",Z);const se=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ae=j("save",se),te={displayName:"",lastName:"",email:"",specialty:"",bio:"",quote:"",location:"",github:"",instagram:"",linkedin:"",whatsapp:"",projects:"",experience:"",clients:""},fe=()=>{const{user:r}=R(),[s,N]=i.useState(te),[v,D]=i.useState(!1),[F,A]=i.useState(""),[w,p]=i.useState(""),[k,E]=i.useState(null),[q,S]=i.useState(""),[d,c]=i.useState([{name:"JavaScript",level:80},{name:"React",level:85}]),[m,f]=i.useState(""),[g,h]=i.useState(80);i.useEffect(()=>{(async()=>{if(r?.uid)try{const t=z(P,"users",r.uid),o=await I(t);if(o.exists()){const a=o.data();N({displayName:a.displayName||"",lastName:a.lastName||"",email:a.email||"",specialty:a.specialty||"",bio:a.bio||"",quote:a.quote||"",location:a.location||"",github:a.socials?.github||"",instagram:a.socials?.instagram||"",linkedin:a.socials?.linkedin||"",whatsapp:a.socials?.whatsapp||"",projects:a.stats?.projects?.toString()||"",experience:a.stats?.experience||"",clients:a.stats?.clients?.toString()||""});const b=a.skills||[{name:"JavaScript",level:80}];c(Array.isArray(b)?b.map(x=>typeof x=="string"?{name:x,level:80}:x):[{name:"JavaScript",level:80}]);const u=localStorage.getItem(`photo_${r.uid}`);S(u||a.photoURL||"")}}catch(t){console.error("Error cargando perfil:",t)}})()},[r?.uid]);const n=l=>{const{name:t,value:o}=l.target;N(a=>({...a,[t]:o}))},B=l=>{const t=l.target.files?.[0];if(t){E(t);const o=new FileReader;o.onloadend=()=>{S(o.result)},o.readAsDataURL(t)}},M=async l=>{if(l.preventDefault(),!r?.uid){p("Usuario no autenticado");return}D(!0),A(""),p("");try{console.log("ðŸ”„ Iniciando actualizaciÃ³n de perfil...");let t=r.photoURL;if(k){console.log("ðŸ“¸ Guardando foto en localStorage...");const u=new FileReader;t=await new Promise(x=>{u.onloadend=()=>{const C=u.result;localStorage.setItem(`photo_${r.uid}`,C),console.log("âœ… Foto guardada en localStorage"),x(C)},u.readAsDataURL(k)})}const o={};s.github&&(o.github=s.github),s.instagram&&(o.instagram=s.instagram),s.linkedin&&(o.linkedin=s.linkedin),s.whatsapp&&(o.whatsapp=s.whatsapp);const a={projects:parseInt(s.projects)||0,experience:s.experience||"1 aÃ±o",clients:parseInt(s.clients)||0};console.log("ðŸ“ Datos a guardar:",{displayName:s.displayName,lastName:s.lastName,specialty:s.specialty,bio:s.bio,quote:s.quote,location:s.location,socials:o,stats:a});const b=z(P,"users",r.uid);console.log("ðŸ”¥ Actualizando Firestore documento:",r.uid),await L(b,{displayName:s.displayName,lastName:s.lastName,email:s.email,specialty:s.specialty,bio:s.bio,quote:s.quote,location:s.location,skills:d,socials:o,stats:a,updatedAt:G()}),console.log("âœ… Perfil actualizado en Firestore"),A("âœ“ Perfil actualizado correctamente."),E(null)}catch(t){console.error("âŒ Error completo:",t),console.error("CÃ³digo:",t.code),console.error("Mensaje:",t.message),p(`Error: ${t.message||"No se pudo actualizar"}`)}finally{D(!1)}};return e.jsxs(y.div,{className:"p-20 space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-[#5D4E37]",children:"Editar mi perfil"}),e.jsx("p",{className:"text-[#8B7355] font-body text-sm",children:"Personaliza tu informaciÃ³n profesional"})]}),e.jsx(U,{className:"text-[#D4AF37]",size:28})]}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[F&&e.jsx(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-4 rounded-xl border border-green-200 bg-green-50 text-green-700 font-body",children:F}),w&&e.jsx(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-4 rounded-xl border border-red-200 bg-red-50 text-red-700 font-body",children:w}),e.jsxs("div",{className:"p-6 rounded-2xl border border-[#D4AF37]/15",style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.05), rgba(255, 250, 240, 0.8))"},children:[e.jsx("label",{className:"block text-sm font-semibold text-[#5D4E37] font-body mb-4",children:"Foto de perfil"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden ring-4 ring-[#D4AF37]/30 ring-offset-2",children:e.jsx("img",{src:q||"/default-avatar.png",alt:"Preview",className:"w-full h-full object-cover"})}),e.jsxs("label",{className:"absolute -bottom-2 -right-2 p-2 rounded-full cursor-pointer text-white shadow-lg hover:scale-110 transition-transform",style:{background:"linear-gradient(135deg, #D4AF37, #B8860B)"},children:[e.jsx(Y,{size:18}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:B})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#8B7355] font-body",children:"Sube una foto profesional que te represente"}),e.jsx("p",{className:"text-xs text-[#8B7355]/70 font-body mt-1",children:"Formatos: JPG, PNG. Max 5MB"})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-[#5D4E37] font-body mb-2",children:"Nombre *"}),e.jsx("input",{name:"displayName",value:s.displayName,onChange:n,className:"w-full px-4 py-3 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-[#5D4E37] font-body mb-2",children:"Apellido *"}),e.jsx("input",{name:"lastName",value:s.lastName,onChange:n,className:"w-full px-4 py-3 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body",required:!0})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-[#5D4E37] font-body mb-2",children:"Email *"}),e.jsx("input",{name:"email",type:"email",value:s.email,onChange:n,className:"w-full px-4 py-3 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-[#5D4E37] font-body mb-2",children:[e.jsx(_,{size:16,className:"text-[#D4AF37]"}),"UbicaciÃ³n"]}),e.jsx("input",{name:"location",value:s.location,onChange:n,className:"w-full px-4 py-3 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body",placeholder:"Ej: Guayaquil, Ecuador"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-[#5D4E37] font-body mb-2",children:"Especialidad / Rol"}),e.jsx("input",{name:"specialty",value:s.specialty,onChange:n,className:"w-full px-4 py-3 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body",placeholder:"Ej: Full Stack Developer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-[#5D4E37] font-body mb-2",children:"BiografÃ­a"}),e.jsx("textarea",{name:"bio",value:s.bio,onChange:n,className:"w-full px-4 py-3 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body resize-none",rows:4,placeholder:"CuÃ©ntanos sobre ti..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-[#5D4E37] font-body mb-2",children:[e.jsx(J,{size:16,className:"text-[#D4AF37]"}),"Frase que te representa"]}),e.jsx("input",{name:"quote",value:s.quote,onChange:n,className:"w-full px-4 py-3 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body",placeholder:"Ej: El cÃ³digo es poesÃ­a que da vida a las ideas âœ¨"})]}),e.jsxs("div",{className:"p-6 rounded-2xl border border-[#D4AF37]/15",style:{background:"linear-gradient(135deg, rgba(212, 175, 55, 0.05), rgba(255, 250, 240, 0.8))"},children:[e.jsx("label",{className:"block text-sm font-semibold text-[#5D4E37] font-body mb-4",children:"EstadÃ­sticas de tu perfil"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-[#5D4E37] font-body mb-2",children:[e.jsx(V,{size:14,className:"text-[#D4AF37]"}),"Proyectos realizados"]}),e.jsx("input",{name:"projects",type:"number",value:s.projects,onChange:n,className:"w-full px-4 py-2.5 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body",placeholder:"15",min:"0"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-[#5D4E37] font-body mb-2",children:[e.jsx(Q,{size:14,className:"text-[#D4AF37]"}),"Experiencia"]}),e.jsx("input",{name:"experience",value:s.experience,onChange:n,className:"w-full px-4 py-2.5 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body",placeholder:"3 aÃ±os"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-[#5D4E37] font-body mb-2",children:[e.jsx(T,{size:14,className:"text-[#D4AF37]"}),"Clientes"]}),e.jsx("input",{name:"clients",type:"number",value:s.clients,onChange:n,className:"w-full px-4 py-2.5 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body",placeholder:"10",min:"0"})]})]})]}),e.jsxs("div",{className:"p-6 rounded-2xl border border-[#D4AF37]/15",style:{background:"linear-gradient(135deg, rgba(184, 134, 11, 0.05), rgba(255, 250, 240, 0.8))"},children:[e.jsx("label",{className:"block text-sm font-semibold text-[#5D4E37] font-body mb-4",children:"Habilidades tÃ©cnicas (mÃ­nimo 2)"}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("input",{type:"text",value:m,onChange:l=>f(l.target.value),className:"flex-1 px-4 py-2.5 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body",placeholder:"Nombre de habilidad (ej: TypeScript)",onKeyDown:l=>{l.key==="Enter"&&(l.preventDefault(),m.trim()&&(c([...d,{name:m.trim(),level:g}]),f(""),h(80)))}}),e.jsx("input",{type:"number",value:g,onChange:l=>h(Math.min(100,Math.max(0,parseInt(l.target.value)||0))),className:"w-20 px-3 py-2.5 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body text-center",placeholder:"%",min:"0",max:"100"}),e.jsx("button",{type:"button",onClick:()=>{m.trim()&&(c([...d,{name:m.trim(),level:g}]),f(""),h(80))},className:"px-4 py-2.5 rounded-xl text-white font-semibold font-body flex items-center gap-2 hover:scale-105 transition-transform",style:{background:"linear-gradient(135deg, #B8860B, #8B7355)"},children:e.jsx(ee,{size:18})})]}),e.jsx("div",{className:"space-y-3",children:d.map((l,t)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:l.name,onChange:o=>{const a=[...d];a[t]={...l,name:o.target.value},c(a)},className:"flex-1 px-4 py-2 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] outline-none font-body"}),e.jsx("input",{type:"range",min:"0",max:"100",value:l.level,onChange:o=>{const a=[...d];a[t]={...l,level:parseInt(o.target.value)},c(a)},className:"w-32 accent-[#D4AF37]"}),e.jsxs("span",{className:"text-sm font-medium text-[#5D4E37] w-12 text-center",children:[l.level,"%"]}),e.jsx("button",{type:"button",onClick:()=>c(d.filter((o,a)=>a!==t)),className:"p-2 rounded-lg bg-red-50 text-red-500 hover:bg-red-100 transition-colors",children:e.jsx(K,{size:16})})]},t))}),d.length<2&&e.jsx("p",{className:"mt-3 text-sm text-amber-600 font-body",children:"âš ï¸ Agrega al menos 2 habilidades"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-px flex-1 bg-[#D4AF37]/20"}),e.jsx("span",{className:"text-sm font-semibold text-[#8B7355] font-body",children:"Redes Sociales"}),e.jsx("div",{className:"h-px flex-1 bg-[#D4AF37]/20"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-[#5D4E37] font-body mb-2",children:[e.jsx(W,{size:16,className:"text-[#D4AF37]"}),"GitHub"]}),e.jsx("input",{name:"github",value:s.github,onChange:n,className:"w-full px-4 py-2.5 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body text-sm",placeholder:"https://github.com/..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-[#5D4E37] font-body mb-2",children:[e.jsx(H,{size:16,className:"text-[#D4AF37]"}),"Instagram"]}),e.jsx("input",{name:"instagram",value:s.instagram,onChange:n,className:"w-full px-4 py-2.5 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body text-sm",placeholder:"https://instagram.com/..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-[#5D4E37] font-body mb-2",children:[e.jsx($,{size:16,className:"text-[#D4AF37]"}),"LinkedIn"]}),e.jsx("input",{name:"linkedin",value:s.linkedin,onChange:n,className:"w-full px-4 py-2.5 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body text-sm",placeholder:"https://linkedin.com/in/..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-[#5D4E37] font-body mb-2",children:[e.jsx(X,{size:16,className:"text-[#D4AF37]"}),"WhatsApp"]}),e.jsx("input",{name:"whatsapp",value:s.whatsapp,onChange:n,className:"w-full px-4 py-2.5 rounded-xl bg-white border border-[#D4AF37]/20 focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 outline-none transition-all font-body text-sm",placeholder:"https://wa.me/593..."})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{className:"px-8 py-3 rounded-xl text-white font-semibold font-body flex items-center gap-2 hover:scale-105 transition-transform shadow-lg disabled:opacity-50 disabled:hover:scale-100",style:{background:"linear-gradient(135deg, #D4AF37, #B8860B)",boxShadow:"0 8px 30px rgba(212, 175, 55, 0.3)"},type:"submit",disabled:v,children:[e.jsx(ae,{size:18}),v?"Guardando...":"Guardar cambios"]})})]})]})};export{fe as default};
