const u=r=>{if(!r)return"/default-avatar.svg";if(r.startsWith("local:")){const t=`photo_${r.replace("local:","")}`;return localStorage.getItem(t)||"/default-avatar.svg"}return r},f=(r,t=200,g=.7)=>new Promise((l,c)=>{const s=new FileReader;s.onload=d=>{const n=new Image;n.onload=()=>{const o=document.createElement("canvas");let e=n.width,a=n.height;e>a?e>t&&(a=a*t/e,e=t):a>t&&(e=e*t/a,a=t),o.width=e,o.height=a,o.getContext("2d")?.drawImage(n,0,0,e,a);const i=o.toDataURL("image/jpeg",g);l(i)},n.onerror=c,n.src=d.target?.result},s.onerror=c,s.readAsDataURL(r)});export{f as c,u as g};
